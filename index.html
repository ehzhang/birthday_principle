<!-- Birthday Princple - Simple static webpage to demonstrate a 6.042 Section  -->

<html>
  <head>
    <title> The Birthday Principle </title>
    <link rel="stylesheet" type="text/css" href="css/semantic.min.css">
    <link rel="stylesheet" type="text/css" href="css/custom.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
  </head>
  
  <body>
    <div class="fixed secondary pointing navbar ui teal main menu opaque">
      <a href="index.html" class="item">
        <div id="active logo">
          The Birthday Principle
        </div>
      </a>

      <a href="index.html"class="active item">
        Overview
      </a>

      <a href="hashing.html"class="item">
        Hashing
      </a>

      <a href="extensions.html" class="item">
        Extensions
      </a>

<!--       <a href="game.html" class="item">
        Game
      </a> -->

    </div>

<!--     <div class = "side-progress-bar">
      <i class="small square inverted icon"></i>
      <i class="small square inverted icon"></i>
      <i class="small square inverted icon"></i>
      <i class="small square inverted icon"></i>

    </div> -->

    <div class="content">
      
      <section id="0" class="window">
          <div class="window-content">
                  <h1> What is the Birthday Principle? </h1>
                  <h2> If there are 25 people in a room, what is the probability that 2 people share a birthday?
                  </h2>
          </div>
          <div class="bottom">
            <a href="#2" class="scroll"><i class="darkgrey angle down icon"></i>
            </a>
          </div>
      </section>

      <section id="2" class="window">
          <div class="window-content">

            <h2> Let's start smaller (or larger!). What if there were 366 people in the room?
              <br>
              (Answer with a probability between 0 and 1)
            </h2>

            <center>
              <div class="ui big action input">
                <input id="question1" type="text" placeholder="Enter an answer here">
                <div id="question1button" class="ui button" onclick="checkValue(1)"> Check Answer </div>
              </div>

            <br>

            <div class="ui accordion">
              <div class="active title">
                <i class="dropdown icon"></i>
                  See Solution and Explantion
              </div>

              <div class="content">

                  The probability is 1! <br>

                  This comes from the Pigeonhole Principle: "If there are more pigeons than holes, at least two pigeons must be in the same hole." <br>

                  In our example, there were 366 'pigeons' (people with birthdays) and 365 'holes' (possible birthdays) that the pigeons could fit in to. So two of them had to go into the same hole, as we can't have 366 unique birthdays!

              </div>
            </div>

            </center>

        </div>
        <div class="bottom">
          <a href="#3" class="scroll">
            <i class="lightgrey angle down icon"></i>            
          </a>
        </div>

      </section>

      <section id="3" class="window">
          <div class="window-content">
            <h2>
            
            In reality, there will probably be a lot fewer than 366 people in a room before someone shares a birthday. 
            Try this game! Just click "Add Person", and a new person will enter the 'room'.
            Each person is randomly assigned a birthday, and the game ends when two of the people in the room have the same birthday.

            </h2>

            <div id="pigeonBirthday">
              <div id="displayWindow">
                <canvas id ="canvas" height="300" width="900">
                  
                </canvas>
              </div>
              <div id="displayWindowInformation">
                <button id="addPerson" class="ui tiny button" onclick="newBirthday()">Add Person</button>
                <button id="clear" class="ui tiny button" onclick="reset()">Reset</button>
                Number of People: <input id="numPeople" value="0" readonly="" />
                <span id="matchLabel">No matching birthdays.</span>
                Low Score: <input id="lowScore" value="0" readonly="" />
                High Score: <input id="highScore" value="0" readonly="" />
              </div>

            </div>

            <h2>
              You might notice it doesn't take too many clicks before finding a matching birthday. How can that be?
            </h2>

          </div>
          <div class="bottom">
            <a href="#4" class="scroll">
              <i class="lightgrey angle down icon"></i>            
            </a>
          </div>
      </section>

      <section id="4" class="window">
          <div class="window-content">
              <h2>
                Instead of thinking about how likely it is that two people would share a birthday, let's think in terms of the chance that no pair in the group share a birthday, since:
                <br>
                <br>
                <div lang="latex">P(atLeastTwoPeopleShareABirthdayInAGroupOfSizeN) = 1 - P(noSharedBirthdaysInAGroupOfSize'n')
                </div>
                <br>
                To visualize this, we will let the members of this group enter a room one at a time and calculate the probability that those in the room do not share a birthday / have a unique birthday.
                <br>
                When the first person, David, enters the room. He has a birthday of January 13th. We have that:                
                <br>
                <br>
                <div lang="latex">P(no One Sharing A Birthday) = \frac{365}{365}                  
                </div>
                <br>
                As no one other than David is in the room, he does not share a birthday with anyone else, so the probability of him having his own birthday is 365/365 = 1.
                </span>                
                <br>
                <br>
                Next, the second person, Amanda enters the room.
                <br>
                In order for no one in the room to share a birthday, Amanda must have a different birthday from David. This happens only when she has a birthday that falls on any other day than January 13th / any of the other 364 days in a year. The probability of this event being true is then:
                <br>
                <br>
                <div lang="latex">P(no One Sharing A Birthday) = \frac{365}{365} \ast \frac{364}{365}</div>
                <br>
                Next, the third person, Miranda enters the room.
                <br>
                In order for no one in the room to share a birthday, Miranda must have a birthday that is different than David's and Amanda's. If Amanda had her birthday on December 20th, then the event that no one in the room shares a birthday would only be true if Miranda's birthday falls on any other day than January 13th and December 20th / any of the other 363 days in a year. We now have:
                <br>
                <br>
                <div lang="latex">P(no One Sharing A Birthday) = \frac{365}{365} \ast \frac{364}{365} \ast \frac{363}{365}</div>

              </h2>
          </div>
          <div class="bottom">
            <a href="#5" class="scroll">
              <i class="darkgrey angle down icon"></i>            
            </a>
          </div>          
      </section>

      <section id="5" class="window">
          <div class="window-content">
              <h2>
              Continuing with letting each person into the room and calculating the probability as before, we find that when the nth person enters the room, we have:
              <br>
              <br>
              <div lang="latex">P(noSharedBirthdaysInAGroupOfSize'n') = \frac{365}{365} \ast \frac{364}{365} \ast \frac{363}{365} ... \ast \frac{(365- n + 1)}{365} 
              </div>
              <br>
              <div lang="latex">
              = \frac{365 \ast 364 \ast 363 \ast ... \ast (365 - n +1)}{365^n}
              </div>
              <br>
              So <span lang="latex">P(noSharedBirthdaysInAGroupOfSize'n')</span> decreases very fast as N, the number of people in the room, increases.
              <br>
              <br>
              Now: 
              <br>
              <div lang="latex">P(at Least One Pair In A Group Of n People Sharing A Birthday) = 1 - P(no One Sharing A Birthday In A Group Of n People)</div>
              <br>
              Therefore, the P(at Least One Pair In A Group Of n People Sharing A Birthday) grows larger very fast. 
              <br>
              <br>
              <div lang="latex">P(no One Sharing A Birthday In A Group Of n People) = \frac{365 \ast 364 \ast 363 \ast ... \ast (365 - n +1)}{365^n} 
              </div>
              <div lang="latex">= (1-\frac{0}{365})(1-\frac{1}{365})(1-\frac{2}{365})....
              </div>
              <br>
              <br>

              </h2>
          </div>

          <div class="bottom">
            <a href="#6" class="scroll">
              <i class="lightgrey angle down icon"></i>            
            </a>
          </div> 
      </section>

      <section id="6" class="window">
          <div class="window-content">
              <h2>

                We can refer to the probability now as <span lang="latex">P(Room')</span>, which will be the total product of each probability of having a unique birthday. Thus:
                <br>
                <br>
                <div lang="latex">P(Room') = (\dfrac{365}{365})(\dfrac{364}{365})(\dfrac{363}{365})...(\dfrac{(n-1)}{365})</div>
                <br>
                <div lang="latex">P(Room') = \dfrac{365(365-1)(365-2)...(365(n-1))}{365}</div>
                <br>
                <div lang="latex">P(Room') = (1-\dfrac{0}{365})(1-\dfrac{1}{365})...(1-\dfrac{(n-1)}{365})</div>
                <br>
                From here, we can replace this with: <span lang="latex">P(Room') = (e^{\frac{0}{365}})(e^{\frac{-1}{365}})(e^{\frac{-2}{365}})...(e^{\frac{-(n-1)}{365}})</span>.
                <br>
                <br>
                This is because we can replace the '1 +' operation with a e^ operation. This is possible because <span lang="latex">1 + x</span> is always less than <span lang="latex">e^x</span>. The equation we get after that substitution is an 'upper bound' on the actual probability equation.

              </h2>
          </div>

          <div class="bottom">
            <a href="#7" class="scroll">
              <i class="darkgrey angle down icon"></i>            
            </a>
          </div> 
      </section>

      <section id="7" class="window">
          <div class="window-content">
              <h2>

                We can finally write the probability as:
                <br>
                <br>
                <div lang="latex">P(room') = e^{\sum\limits_{i=1}^{n-1} \frac{i}{365}}</div>
                <br>
                We can simplify the sum, so now:
                <div lang="latex">P('RoomHasNoRepeatBirthdays') = e^{-\frac{n(n-1)}{2(365)}}</div>
                <br>
                <br>
                so this also means:
                <div lang="latex">P('RoomHasRepeatBirthday') = 1 - e^{-\frac{n(n-1)}{2(365)}}</div>
                <br>
                <br>
                We can observe this probability in the following graph:
                <br>
                <a href="http://en.wikipedia.org/wiki/Birthday_problem"><img src="http://upload.wikimedia.org/wikipedia/commons/e/e7/Birthday_Paradox.svg" width="300"></a>
              </h2>
              <h3> (source: http://en.wikipedia.org/wiki/Birthday_problem)
              </h3>
          </div>

          <div class="bottom">
            <a href="#8" class="scroll">
              <i class="darkgrey angle down icon"></i>            
            </a>
          </div> 
      </section>

      <section id="8" class="window">
          <div class="window-content">

            <h2> You can now answer the original question!
              <br>
              What is the probability two people wil share a birthday if there are 25 people in a room?
              <br>
              (Answer with a probability between 0 and 1)
            </h2>

            <center>
              <div class="ui big action input">
                <input id="question2" type="text" placeholder="Enter an answer here">
                <div id="question2button" class="ui button" onclick="checkValue(2)"> Check Answer </div>
              </div>

            <br>

            <div class="ui accordion">
              <div class="active title">
                See Solution and Explanation
                <i class="dropdown icon"></i>
                <br>

              </div>

              <div class="content">

                You can find this simply by plugging in '25' for n in the equation below!
                <div lang="latex">P('RoomHasRepeatBirthday') = 1 - e^{-\frac{n(n-1)}{2(365)}}</div>

              </div>
            </div>

            </center>
          </div>

      </section>


    </div>

    <!-- Load the script at the end for faster load -->
    <script src="js/jquery-2.0.3.min.js"></script>
    <script src="js/jquery.windows.js"></script>
    <script src="js/semantic.min.js"></script>
    <script type="text/javascript" src="http://latex.codecogs.com/latexit.js"></script>
    <script src="js/site.js"></script>
    <script>
      $('.ui.accordion')
        .accordion()
      ;

      function checkValue(question){
        var button = document.getElementById("question" + question + "button")

        if(question == 1) {
          if (document.getElementById("question1").value == 1) {
            button.className = "ui button green";
          }
          else {
            button.className = "ui button red";
          }
        }

        if(question ==2) {
          var answer = document.getElementById("question2").value;
          if (answer < .58 && answer > .56) {
            button.className = "ui button green";
          } else {
            button.className = "ui button red";
          }
        }
      }      

      var canvas = document.getElementById('canvas');
      var ctx = canvas.getContext('2d');
      ctx.font='1em';

      var randomMonth;
      var randomDay;
      var count=0;
      var birthdays = new Array();

      function newBirthday(){
        var xCoordinate = Math.floor(Math.random()*(canvas.width));
        var yCoordinate = Math.floor(Math.random()*(canvas.height));

        function birthday(){
          randomMonth = Math.floor(Math.random()*12+1);
          if (randomMonth ==2 ){
            randomDay = Math.floor(Math.random()*29+1);
          } else if ((randomMonth < 8 && randomMonth%2==1)||(randomMonth>7&& randomMonth%2==0)){
            randomDay = Math.floor(Math.random()*31+1);
          } else {
            randomDay = Math.floor(Math.random()*30+1);
          }
        }

        function drawPerson(){
          ctx.beginPath();
          ctx.arc(xCoordinate,yCoordinate,20,0,2*Math.PI);
          ctx.stroke();
          ctx.fillText(randomMonth+"/"+randomDay,xCoordinate-15,yCoordinate+5);
        }
        count++;
        document.getElementById('numPeople').value=count;
        birthday();
        drawPerson();
        birthdayEntry = randomDay.toString() + randomMonth.toString();

        if (birthdays.lastIndexOf(birthdayEntry)==-1){
          birthdays.push(birthdayEntry);
        } else {
          birthdays.push(birthdayEntry);
          document.getElementById('addPerson').disabled=true;
          document.getElementById('matchLabel').innerHTML='Found a match! '+randomMonth+'/'+randomDay;
          if (document.getElementById('highScore').value==0&document.getElementById('lowScore').value==0){
          	document.getElementById('lowScore').value=count;
          	document.getElementById('highScore').value=count;
          }
          if (document.getElementById('highScore').value<count){
          	document.getElementById('highScore').value=count;
          }
          if (document.getElementById('lowScore').value>count){
          	document.getElementById('lowScore').value=count;
          }

        }
      }
      function reset(){
        count=0;
        document.getElementById('numPeople').value=count;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        document.getElementById('addPerson').disabled=false;
        document.getElementById('matchLabel').innerHTML='No matching birthdays.';
        birthdays=[];
      }  

    </script>
  </body>
</html>

